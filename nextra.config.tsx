import { DocsThemeConfig, useConfig, ThemeSwitch } from 'nextra-theme-docs';

import { useRouter } from 'next/router';
import styled, { createGlobalStyle } from 'styled-components';
import { parseToHsl, transparentize } from 'polished';

const primaryColor = '#0079DB';

const GlobalStyle = createGlobalStyle`
    :root {
        //--nextra-navbar-height: 93px;
        
        --primary-color: ${primaryColor};
        --primary-low-opacity-color: ${transparentize(0.85, primaryColor)};
    }
    
    html {
        --text-main: #101828;
        --text-secondary: #475467;
        --logo-color: #162427;
        --bg-secondary: ${transparentize(0.95, primaryColor)};
        font-family: "Inter", ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Noto Sans, Ubuntu, Cantarell, Helvetica Neue, Arial, sans-serif, Apple Color Emoji, Segoe UI Emoji, Segoe UI Symbol, Noto Color Emoji;
        
        &[class~='dark'] {
            --text-main: #fff;
            --text-secondary: #a3a3a3;
            --logo-color: #ffffff;
            --bg-secondary: ${transparentize(0.95, primaryColor)};
        }
        
        color: var(--text-main);
    }
  //.nextra-nav-container-blur {
  //    backdrop-filter: none;
  //    background: #fff;
  //    
  //    html[class~=dark] & {
  //        background: #111 !important;
  //    }
  //}
  
  .nextra-nav-container {
      & > nav {
          justify-content: flex-start;
          gap: 16px;
          
          a {
              font-size: 16px;
          }

          & > :first-child {
              @media screen and (min-width: 768px) {
                  margin-right: 1.5rem;
              }
          }
      }

      .nextra-search {
          margin-left: auto;
      }

      & ~ footer {
          background: inherit !important;
      }
  }
  
  .nextra-sidebar-container > :last-child {
      display: none;
  }
  .nextra-search + button {
      margin-left: -8px;
  }
`;

const StyledThemeSwitch = styled(ThemeSwitch)`
  span {
    display: none;
  }
`;

const LogoSvg = styled.svg`
  fill: var(--logo-color);
  height: 32px;
`;

const config: DocsThemeConfig = {
  primaryHue: parseToHsl(primaryColor).hue,
  primarySaturation: 100 * parseToHsl(primaryColor).saturation,
  logo: (
    <LogoSvg viewBox="0 0 139 31">
      <path d="M25.3708 18.8365C23.2609 20.1476 20.9314 21.0003 18.5763 21.3803C20.8051 20.5236 22.8166 19.2464 24.4704 17.6642C26.1267 16.084 27.4272 14.2043 28.3057 12.1931C29.1822 10.1795 29.6346 8.03756 29.6605 5.9426C29.6807 4.47123 29.4865 3.02698 29.1122 1.65151C28.6558 1.24968 28.0593 1.00364 27.4038 1.00081C27.6765 2.68787 27.734 4.38949 27.5753 6.04984C27.3277 8.61624 26.573 11.0831 25.3991 13.2707C24.2277 15.4612 22.6362 17.3643 20.7869 18.8709C22.289 17.0143 23.3925 14.9027 24.0334 12.7054C24.6776 10.5085 24.8642 8.23059 24.6194 6.04984C24.4174 4.27092 23.9246 2.56202 23.1958 1.00041H20.8695C20.884 1.03238 20.901 1.06313 20.9156 1.0951C21.9843 3.44176 22.5641 5.95515 22.641 8.43657C22.7215 10.9192 22.295 13.3634 21.4469 15.5927C21.8196 13.2339 21.7192 10.8532 21.1758 8.63C20.6356 6.40514 19.6579 4.33931 18.3554 2.57294C17.9438 2.01652 17.4971 1.49369 17.0261 1H13.7856C15.3945 2.335 16.7675 3.9051 17.8354 5.62858C19.1465 7.73852 19.9991 10.0682 20.379 12.4233C19.5224 10.1944 18.2453 8.18284 16.6631 6.52897C15.0829 4.87267 13.2033 3.57207 11.1922 2.69353C9.17869 1.81703 7.03688 1.36461 4.942 1.33871C3.47028 1.31848 2.02649 1.51271 0.65108 1.88703C0.249262 2.3435 0.0032339 2.93997 0.000401341 3.59554C1.68739 3.32279 3.38895 3.26533 5.04923 3.42396C7.61553 3.67161 10.0823 4.42632 12.2698 5.60026C14.4602 6.77177 16.3633 8.36332 17.8698 10.2127C16.0132 8.71053 13.9018 7.607 11.7045 6.96601C9.50767 6.32178 7.22989 6.13523 5.04923 6.38005C3.27039 6.58198 1.56155 7.07486 0 7.80367V10.1301C0.0315628 10.1155 0.0627182 10.0985 0.0946857 10.084C2.44126 9.01524 4.95454 8.43535 7.43586 8.35847C9.91839 8.27794 12.3625 8.70446 14.5917 9.55264C12.233 9.17994 9.85284 9.2803 7.62928 9.82377C5.40451 10.364 3.33877 11.3417 1.57247 12.6443C1.01607 13.0558 0.493269 13.5026 0 13.9736V17.2138C1.33494 15.6048 2.90498 14.2318 4.62839 13.1639C6.73824 11.8528 9.06781 11.0001 11.4229 10.6202C9.19407 11.4768 7.18255 12.754 5.52874 14.3362C3.87251 15.9164 2.57196 17.7961 1.69346 19.8073C0.816989 21.8209 0.36459 23.9628 0.338287 26.0578C0.318055 27.5292 0.51269 28.9734 0.886588 30.3489C1.34303 30.7507 1.93949 30.9968 2.59502 30.9996C2.32229 29.3125 2.26483 27.6109 2.42345 25.9506C2.6711 23.3842 3.42577 20.9173 4.59966 18.7297C5.77112 16.5392 7.36262 14.6361 9.21187 13.1295C7.70981 14.9861 6.60632 17.0977 5.96536 19.295C5.32115 21.4919 5.13461 23.7698 5.37942 25.9506C5.58134 27.7291 6.07421 29.4384 6.80299 31H9.12932C9.11475 30.9684 9.09776 30.9373 9.08319 30.9053C8.01451 28.559 7.43465 26.0453 7.35776 23.5638C7.27724 21.0812 7.70374 18.637 8.55188 16.4077C8.1792 18.7665 8.27955 21.1472 8.823 23.3704C9.36321 25.5949 10.3408 27.6611 11.6434 29.4275C12.0549 29.9839 12.5017 30.5067 12.9727 31H16.2135C14.6047 29.665 13.2317 28.0949 12.1638 26.3714C10.8527 24.2615 10.0001 21.9318 9.62016 19.5766C10.4768 21.8056 11.7539 23.8172 13.3361 25.471C14.9162 27.1273 16.7958 28.4279 18.8069 29.3065C20.8205 30.183 22.9623 30.6354 25.0572 30.6613C26.5289 30.6815 27.9727 30.4873 29.3481 30.113C29.7499 29.6565 29.9959 29.06 29.9988 28.4045C28.3118 28.6772 26.6102 28.7347 24.95 28.576C22.3837 28.3284 19.9169 27.5737 17.7294 26.3997C15.5394 25.2282 13.6359 23.6367 12.1294 21.7874C13.9859 23.2895 16.0974 24.393 18.2947 25.034C20.4915 25.6782 22.7693 25.8648 24.95 25.62C26.7288 25.418 28.4376 24.9251 29.9996 24.1963V21.8699C29.968 21.8845 29.9369 21.9015 29.9049 21.916C27.5587 22.9848 25.045 23.5646 22.5637 23.6415C20.0812 23.7221 17.6371 23.2955 15.4079 22.4474C17.7666 22.8201 20.1472 22.7197 22.3703 22.1762C24.5951 21.636 26.6608 20.6583 28.4271 19.3557C28.9835 18.9442 29.5063 18.4974 30 18.0264V14.7862C28.6642 16.396 27.0942 17.769 25.3708 18.8365Z" />
      <path d="M42.084 24.154C40.28 24.154 38.7987 23.7287 37.64 22.878C36.4813 22.0127 35.858 20.7807 35.77 19.182H40.368C40.412 19.7247 40.5733 20.1207 40.852 20.37C41.1307 20.6193 41.49 20.744 41.93 20.744C42.326 20.744 42.6487 20.6487 42.898 20.458C43.162 20.2527 43.294 19.974 43.294 19.622C43.294 19.1673 43.0813 18.8153 42.656 18.566C42.2307 18.3167 41.5413 18.038 40.588 17.73C39.576 17.3927 38.7547 17.07 38.124 16.762C37.508 16.4393 36.9653 15.9773 36.496 15.376C36.0413 14.76 35.814 13.9607 35.814 12.978C35.814 11.9807 36.0633 11.13 36.562 10.426C37.0607 9.70733 37.75 9.16467 38.63 8.798C39.51 8.43133 40.5073 8.248 41.622 8.248C43.426 8.248 44.8633 8.67333 45.934 9.524C47.0193 10.36 47.5987 11.5407 47.672 13.066H42.986C42.9713 12.5967 42.8247 12.2447 42.546 12.01C42.282 11.7753 41.9373 11.658 41.512 11.658C41.1893 11.658 40.9253 11.7533 40.72 11.944C40.5147 12.1347 40.412 12.406 40.412 12.758C40.412 13.0513 40.522 13.308 40.742 13.528C40.9767 13.7333 41.2627 13.9167 41.6 14.078C41.9373 14.2247 42.436 14.4153 43.096 14.65C44.0787 14.9873 44.8853 15.3247 45.516 15.662C46.1613 15.9847 46.7113 16.4467 47.166 17.048C47.6353 17.6347 47.87 18.3827 47.87 19.292C47.87 20.216 47.6353 21.0447 47.166 21.778C46.7113 22.5113 46.044 23.0907 45.164 23.516C44.2987 23.9413 43.272 24.154 42.084 24.154ZM57.3106 24.154C55.8586 24.154 54.5239 23.8167 53.3066 23.142C52.0892 22.4527 51.1212 21.5067 50.4026 20.304C49.6986 19.0867 49.3466 17.7153 49.3466 16.19C49.3466 14.6647 49.6986 13.3007 50.4026 12.098C51.1212 10.8807 52.0892 9.93467 53.3066 9.26C54.5239 8.58533 55.8586 8.248 57.3106 8.248C58.7772 8.248 60.1119 8.58533 61.3146 9.26C62.5319 9.93467 63.4926 10.8807 64.1966 12.098C64.9006 13.3007 65.2526 14.6647 65.2526 16.19C65.2526 17.7153 64.9006 19.0867 64.1966 20.304C63.4926 21.5067 62.5319 22.4527 61.3146 23.142C60.0972 23.8167 58.7626 24.154 57.3106 24.154ZM57.3106 20.15C58.4106 20.15 59.2759 19.7907 59.9066 19.072C60.5519 18.3533 60.8746 17.3927 60.8746 16.19C60.8746 14.958 60.5519 13.99 59.9066 13.286C59.2759 12.5673 58.4106 12.208 57.3106 12.208C56.1959 12.208 55.3232 12.5673 54.6926 13.286C54.0619 13.99 53.7466 14.958 53.7466 16.19C53.7466 17.4073 54.0619 18.3753 54.6926 19.094C55.3232 19.798 56.1959 20.15 57.3106 20.15ZM71.503 20.7H76.321V24H67.191V8.49H71.503V20.7ZM87.8096 21.47H82.3096L81.4736 24H76.9416L82.5956 8.49H87.5676L93.1996 24H88.6456L87.8096 21.47ZM86.7316 18.17L85.0596 13.154L83.4096 18.17H86.7316ZM102.459 24L99.379 18.28H98.917V24H94.605V8.49H101.403C102.65 8.49 103.706 8.71 104.571 9.15C105.436 9.57533 106.089 10.1693 106.529 10.932C106.969 11.68 107.189 12.5233 107.189 13.462C107.189 14.518 106.896 15.4493 106.309 16.256C105.737 17.048 104.894 17.6127 103.779 17.95L107.277 24H102.459ZM98.917 15.332H101.051C101.638 15.332 102.078 15.1927 102.371 14.914C102.664 14.6353 102.811 14.232 102.811 13.704C102.811 13.2053 102.657 12.8167 102.349 12.538C102.056 12.2447 101.623 12.098 101.051 12.098H98.917V15.332ZM113.462 8.49V24H109.15V8.49H113.462ZM121.77 24.154C119.966 24.154 118.484 23.7287 117.326 22.878C116.167 22.0127 115.544 20.7807 115.456 19.182H120.054C120.098 19.7247 120.259 20.1207 120.538 20.37C120.816 20.6193 121.176 20.744 121.616 20.744C122.012 20.744 122.334 20.6487 122.584 20.458C122.848 20.2527 122.98 19.974 122.98 19.622C122.98 19.1673 122.767 18.8153 122.342 18.566C121.916 18.3167 121.227 18.038 120.274 17.73C119.262 17.3927 118.44 17.07 117.81 16.762C117.194 16.4393 116.651 15.9773 116.182 15.376C115.727 14.76 115.5 13.9607 115.5 12.978C115.5 11.9807 115.749 11.13 116.248 10.426C116.746 9.70733 117.436 9.16467 118.316 8.798C119.196 8.43133 120.193 8.248 121.308 8.248C123.112 8.248 124.549 8.67333 125.62 9.524C126.705 10.36 127.284 11.5407 127.358 13.066H122.672C122.657 12.5967 122.51 12.2447 122.232 12.01C121.968 11.7753 121.623 11.658 121.198 11.658C120.875 11.658 120.611 11.7533 120.406 11.944C120.2 12.1347 120.098 12.406 120.098 12.758C120.098 13.0513 120.208 13.308 120.428 13.528C120.662 13.7333 120.948 13.9167 121.286 14.078C121.623 14.2247 122.122 14.4153 122.782 14.65C123.764 14.9873 124.571 15.3247 125.202 15.662C125.847 15.9847 126.397 16.4467 126.852 17.048C127.321 17.6347 127.556 18.3827 127.556 19.292C127.556 20.216 127.321 21.0447 126.852 21.778C126.397 22.5113 125.73 23.0907 124.85 23.516C123.984 23.9413 122.958 24.154 121.77 24.154Z" />
    </LogoSvg>
  ),
  docsRepositoryBase: 'https://github.com/solarisdb/solarisdb.github.io/tree/main',
  project: {},
  navbar: {
    extraContent: (
      <>
        <GlobalStyle />
        <StyledThemeSwitch lite className="[&_span]:hidden" data-theme-switch />
      </>
    ),
  },
  search: {
    placeholder: 'Search...',
  },
  sidebar: {
    // toggleButton: true,
  },
  themeSwitch: {
    component: undefined,
  },
  toc: {
    backToTop: true,
  },
  // banner: {
  //   key: 'banner-test-101',
  //   text: 'First release of Solaris is available! 😎',
  // },
  footer: {
    text: <span style={{ fontSize: 12 }}>© {new Date().getFullYear()} Solaris</span>,
  },
  useNextSeoProps: () => {
    const { asPath } = useRouter();

    if (['/docs', '/blog'].some((item) => asPath.startsWith(item))) {
      return {
        titleTemplate: '%s | Solaris',
      };
    }

    return {
      titleTemplate: 'Solaris',
    };
  },
  head: () => {
    // eslint-disable-next-line react-hooks/rules-of-hooks
    const { frontMatter } = useConfig();

    return (
      <>
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
        <link rel="icon" type="image/png" href="/favicon.png" />
        <meta name="msapplication-TileColor" content="#222222" />
        <meta property="og:type" content="website" />
        <meta property="og:locale" content="en_US" />
        <meta property="og:site_name" content="Solaris" />
        {frontMatter.image ? <meta property="og:image" content={frontMatter.image} /> : null}
        {frontMatter.video ? <meta property="og:video" content={frontMatter.video} /> : null}
        <link rel="preconnect" href="https://fonts.googleapis.com" />
        <link rel="preconnect" href="https://fonts.gstatic.com" crossOrigin="" />
        <link
          href="https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap"
          rel="stylesheet"
        />
      </>
    );
  },
  // ... other theme options
};

export default config;
